# Alpha Sentinel OS - 개발 진행 상황 및 로드맵 테이블

현재까지의 개발 진행 상황과 PRD(Top-Down 철학)에 따른 향후 개발 방향을 정리한 문서입니다.

---

## ✅ 완료된 작업 (Phase 1: Infra & Data Ingestion)

기반 인프라 구축 및 필수 데이터 수집 파이프라인 1차 완료.

| 영역 | 세부 항목 | 상태 | 비고 |
| :--- | :--- | :---: | :--- |
| **인프라** | Docker/Compose 환경 (DB, Backend, Frontend) | ✅ | `docker-compose.yml`, 컨테이너 연동 완료 |
| **DB** | PostgreSQL 구축 및 외부 접속(DBeaver) | ✅ | 포트 `5435`, 데이터 영속성 확보 |
| **Schema** | 핵심 테이블 설계 (`tickers`, `market_data`, `macro`) | ✅ | `init_db.sql` 반영 완료 |
| **수집기** | **Market Collector** (주가 데이터) | ✅ | `api/collectors/market.py` (yfinance) |
| **수집기** | **Macro Collector** (거시경제) | ✅ | `api/collectors/fred.py` (FRED API) |
| **분석** | **Basic Analyzer** (기술적 지표) | ✅ | `api/analyzer.py` (SMA, RSI, BB 계산) |

---

## 🚀 향후 개발 방향 (Phase 2: Logic & AI Agents)

PRD의 **"Top-Down Priority"** 및 **"멀티 에이전트"** 철학을 구현하기 위한 로드맵입니다.

### 1단계: Macro Sentry (거시경제 파수꾼) 구축
**"시장이 위험한가?"**를 먼저 판단하여 글로벌 킬스위치를 구현합니다.
- [x] **LangGraph State 정의 (`api/agents/state.py`)**: 에이전트 간 데이터 공유 구조 설계 완료.
- [x] **Macro Agent (`api/agents/macro_node.py`)**: 
    - FRED 데이터 파싱 및 LLM 연동.
    - `Risk-On` / `Risk-Off` 판단 로직 구현 및 테스트 완료.
- [x] **Graph Pipeline (`api/agents/graph.py`)**: 단일 노드 실행 테스트 성공.

### 2단계: Sector Strategist (업종 전략가) - [NEXT]
거시경제가 'Risk-On'일 때 유망한 섹터를 발굴합니다.
- [ ] **Sector Data 수집**: 주요 섹터 ETF(XLK, XLV 등) 가격 데이터 수집.
- [ ] **Sector Agent (`api/agents/sector_node.py`)**: 
    - 섹터별 모멘텀 분석 및 순위 산정.
    - Macro 결과와 결합하여 "지금 기술주를 살 때인가?" 판단.

### 3단계: Fundamental & Sentiment (기업 분석)
- [ ] **Fundamental Engine (`api/calculators/finance.py`)**: PER, PBR 등 재무지표 계산.
- [ ] **Sentiment Node (`api/collectors/reddit.py`)**: 
    - Reddit(WallStreetBets) 등 커뮤니티 감성 분석.
    - 시니어 조언에 따라 `Rate Limiter` 적용 필수.

### 4단계: CIO Agent (최종 의사결정)
모든 정보를 종합하여 **최종 포트폴리오**를 확정합니다.
- [ ] **CIO Agent (`api/agents/cio.py`)**
    - Macro Agent의 위험도 + Sector 전략 + 개별 기업 분석 종합.
    - 최종 `BUY` / `SELL` / `HOLD` 오더 생성.

### 2단계: Sector & Fundamental Analysis (전략 및 기업 분석)
시장이 안전하다면, **"어떤 섹터와 기업을 살 것인가?"**를 분석합니다.
- [ ] **Data Pipeline 고도화**
    - 재무제표 데이터 수집기 추가 (Open DART 또는 yfinance 재무 데이터).
- [ ] **Fundamental Engine (`api/calculators/finance.py`)**
    - PER, PBR, ROE, 부채비율 등 정량적 지표 계산.
- [ ] **Insight Analyst (`api/agents/insight.py`)**
    - 뉴스/공시 텍스트 감성 분석 (LLM).

### 3단계: CIO Agent (최종 의사결정)
모든 정보를 종합하여 **최종 포트폴리오**를 확정합니다.
- [ ] **CIO Agent (`api/agents/cio.py`)**
    - Macro Agent의 위험도 + Fundamental Engine의 우량주 리스트 종합.
    - 최종 `BUY` / `SELL` / `HOLD` 오더 생성 및 `investment_thesis`(투자 가설) 기록.

### 4단계: Scheduler & Automation (완전 자동화)
- [ ] **Scheduler (`api/scheduler.py`)**
    - 매일 밤: 데이터 수집 -> Macro 판단 -> 종목 분석 -> CIO 결정을 순차적으로 실행.

---

## 📂 프로젝트 구조 변경 예정 (Refactoring)
PRD 아키텍처에 맞춰 폴더 구조를 점진적으로 변경합니다.

```text
/api
  ├── /collectors   (완료: market.py, fred.py)
  ├── /calculators  (예정: macro.py, finance.py)  <-- analyzer.py 기능 분리
  ├── /agents       (예정: macro.py, cio.py)      <-- AI 로직 위치
  ├── /core         (완료: db_utils.py)
  └── scheduler.py  (예정)
```
